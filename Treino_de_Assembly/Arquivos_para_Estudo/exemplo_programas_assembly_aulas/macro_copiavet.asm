TITLE MACRO COPIA STRING
.MODEL SMALL
.STACK 0100H

PUSH_ALL  MACRO  
    PUSH AX
    PUSH BX
    PUSH CX
    PUSH DX
    PUSH SI
    PUSH DI
ENDM
POP_ALL  MACRO  
    POP DI
    POP SI
    POP DX
    POP CX
    POP BX
 ;   POP AX
ENDM
IMP_STR MACRO FONTE,QUANTIDADE
    LOCAL REPETE
    PUSH_ALL
    LEA SI, FONTE
    MOV AH,02
    MOV CX, QUANTIDADE
REPETE:
    MOV DL,[SI]
    INT 21H
    INC SI
    LOOP REPETE 
    POP_ALL
ENDM
COPIA_STR MACRO FONTE, DESTINO, QUANTIDADE
    LOCAL REPETE
    PUSH_ALL
    LEA SI, FONTE
    LEA DI, DESTINO
    MOV CX, QUANTIDADE
REPETE:
    MOV DL,[SI]
    MOV [DI],DL
    INC SI
    INC DI
    LOOP REPETE 
    POP_ALL
ENDM
.DATA

    STR1 DB 10 DUP ('X')
    STR2 DB  10 DUP(?)
.CODE
MAIN PROC
    MOV AX,@DATA
    MOV DS,AX

    COPIA_STR STR1,STR2,10
    IMP_STR STR2,10 

    MOV AH,4CH
    INT 21H
MAIN ENDP
END MAIN